<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https://r2.wikily.gg https://ark.wiki.gg data:"
		/>
		<title>ARK Locator</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<div class="app-container">
			<!-- Collapsible Sidebar -->
			<aside id="sidebar" class="sidebar">
				<div id="sidebar-resize" class="sidebar-resize-handle"></div>
				<div class="sidebar-header">
					<h1>Ark Locator</h1>
				</div>

				<div class="sidebar-content">
					<!-- Map Selection -->
					<section class="sidebar-section">
						<h3>Select Map</h3>
						<select id="map-select" class="map-select">
							<option value="lost-colony">Lost Colony</option>
							<option value="astraeos">Astraeos</option>
							<option value="valguero">Valguero</option>
							<option value="island">The Island</option>
							<option value="scorched-earth">
								Scorched Earth
							</option>
							<option value="aberration">Aberration</option>
							<option value="extinction">Extinction</option>
							<option value="the-center">The Center</option>
							<option value="ragnarok">Ragnarok</option>
							<option value="genesis-1">Genesis: Part 1</option>
							<option value="crystal-isles">Crystal Isles</option>
							<option value="genesis-2">Genesis: Part 2</option>
							<option value="lost-island">Lost Island</option>
							<option value="fjordur">Fjordur</option>
						</select>
					</section>

					<!-- Waypoint Lists -->
					<section class="sidebar-section">
						<h3>Waypoints</h3>
						<div class="waypoint-stats">
							<span id="waypoint-count">0 markers</span>
							<div class="visibility-toggles">
								<button
									id="show-all-btn"
									class="btn-link"
									title="Show all categories"
								>
									Show All
								</button>
								<span class="separator">|</span>
								<button
									id="hide-all-btn"
									class="btn-link"
									title="Hide all categories"
								>
									Hide All
								</button>
							</div>
						</div>
						<div id="waypoint-list" class="waypoint-list">
							<p class="empty-state">
								Double-click on the map to add markers
							</p>
						</div>
						<button
							id="add-category-btn"
							class="btn btn-small btn-secondary"
						>
							+ Add Category
						</button>
					</section>

					<!-- Import/Export -->
					<section class="sidebar-section collapsible">
						<h3 class="collapsible-header">
							<span>Import / Export</span>
							<span class="collapse-icon">▼</span>
						</h3>
						<div class="collapsible-content">
							<button
								id="import-ark-btn"
								class="btn btn-primary full-width"
								style="margin-bottom: 10px"
							>
								Import All Markers from ARK
							</button>
							<div class="file-path-row">
								<input
									type="text"
									id="file-path"
									placeholder="ARK waypoints file..."
									readonly
								/>
								<button
									id="browse-btn"
									class="btn btn-small btn-secondary"
									title="Browse for file"
								>
									Browse
								</button>
							</div>
							<div class="btn-group">
								<button
									id="import-btn"
									class="btn btn-small btn-secondary"
									disabled
								>
									Import from JSON
								</button>
								<button
									id="export-btn"
									class="btn btn-small btn-secondary"
								>
									Export JSON
								</button>
							</div>
							<div id="io-status" class="status-message"></div>
						</div>
					</section>
				</div>
			</aside>

			<!-- Main Map Area -->
			<main class="map-container">
				<div id="map-viewport" class="map-viewport">
					<img
						id="map-image"
						src=""
						alt="ARK Map"
						class="map-image"
					/>
					<div id="markers-layer" class="markers-layer"></div>
					<div id="coords-display" class="coords-display">
						Lat: --, Lon: --
					</div>
				</div>

				<!-- Map Controls -->
				<div class="map-controls">
					<button
						id="refresh-btn"
						class="map-ctrl-btn map-ctrl-btn-small"
						title="Reload App"
					>
						↻
					</button>
					<button id="zoom-in" class="map-ctrl-btn" title="Zoom In">
						+
					</button>
					<button id="zoom-out" class="map-ctrl-btn" title="Zoom Out">
						−
					</button>
					<button
						id="zoom-reset"
						class="map-ctrl-btn"
						title="Reset View"
					>
						⟲
					</button>
				</div>

				<!-- No Map Message -->
				<div id="no-map-message" class="no-map-message hidden">
					<p>Map image not available for this map</p>
					<p class="sub">
						Select a different map or add your own map images
					</p>
				</div>

				<!-- Help Button -->
				<button
					id="help-btn"
					class="help-btn"
					title="Keyboard Shortcuts"
				>
					?
				</button>
			</main>
		</div>

		<!-- Help Modal -->
		<div id="help-modal" class="modal hidden">
			<div class="modal-content modal-content-help">
				<div class="version-info">
					<strong>ARK Locator</strong> v<span id="app-version"
						>1.0.0</span
					>
				</div>
				<h3>Keyboard Shortcuts</h3>
				<table class="hotkeys-table">
					<thead>
						<tr>
							<th>Action</th>
							<th>Shortcut</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Add marker</td>
							<td>Double-click</td>
						</tr>
						<tr>
							<td>Pan map</td>
							<td>Click + drag</td>
						</tr>
						<tr>
							<td>Pan map (alt)</td>
							<td>Space + drag</td>
						</tr>
						<tr>
							<td>Zoom</td>
							<td>Scroll wheel</td>
						</tr>
					</tbody>
				</table>
				<div class="modal-actions">
					<button id="check-updates-btn" class="btn btn-secondary">
						Check for Updates
					</button>
					<button id="clear-data-btn" class="btn btn-danger">
						Clear All Data
					</button>
					<button id="close-help" class="btn btn-primary">
						Close
					</button>
				</div>
			</div>
		</div>

		<!-- Add Marker Modal -->
		<div id="marker-modal" class="modal hidden">
			<div class="modal-content">
				<h3 id="marker-modal-title">Add Marker</h3>
				<div class="form-group">
					<label for="marker-name">Name</label>
					<input
						type="text"
						id="marker-name"
						placeholder="Marker name..."
					/>
				</div>
				<div class="form-group">
					<label for="marker-category">Category</label>
					<div class="category-select-wrapper">
						<select id="marker-category"></select>
						<input
							type="text"
							id="new-category-input"
							class="hidden"
							placeholder="New category name..."
						/>
						<button
							id="toggle-new-category"
							class="btn btn-small btn-secondary"
							title="Add new category"
						>
							+
						</button>
					</div>
				</div>
				<div class="form-group">
					<label>Coordinates</label>
					<div class="coords-row">
						<input type="number" id="marker-lat" step="0.1" />
						<input type="number" id="marker-lon" step="0.1" />
					</div>
				</div>
				<div class="modal-actions">
					<button
						id="delete-marker-btn"
						class="btn btn-danger hidden"
					>
						Delete
					</button>
					<div class="modal-actions-right">
						<button id="cancel-marker" class="btn btn-secondary">
							Cancel
						</button>
						<button id="save-marker" class="btn btn-primary">
							Save Marker
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Category Modal (Add/Edit) -->
		<div id="category-modal" class="modal hidden">
			<div class="modal-content">
				<h3 id="category-modal-title">Add Category</h3>
				<div class="form-group">
					<label for="category-name">Category Name</label>
					<input
						type="text"
						id="category-name"
						placeholder="e.g., Base Locations"
					/>
				</div>
				<div class="form-group">
					<label for="category-color">Color</label>
					<input type="color" id="category-color" value="#00d9ff" />
				</div>
				<div class="modal-actions">
					<button id="delete-category" class="btn btn-danger hidden">
						Delete
					</button>
					<div class="modal-actions-right">
						<button id="cancel-category" class="btn btn-secondary">
							Cancel
						</button>
						<button id="save-category" class="btn btn-primary">
							Save
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- INI Import/Export Modal -->
		<div id="ini-modal" class="modal hidden">
			<div class="modal-content">
				<h3 id="ini-modal-title">ARK Game Integration</h3>
				<p
					id="ini-modal-message"
					style="margin-bottom: 15px; color: #aaa"
				></p>
				<div class="modal-actions">
					<button id="close-ini-modal" class="btn btn-primary">
						OK
					</button>
				</div>
			</div>
		</div>

		<script src="renderer.js"></script>
	</body>
</html>
